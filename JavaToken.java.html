<!DOCTYPE html><html><body><pre style="background: black; color: #BCBCBC;"><span style="color: #D27428;">package </span>co.gyeongmin.lang.javalang;

<span style="color: #D27428;">import </span>java.util.HashMap;
<span style="color: #D27428;">import </span>java.util.Map;
<span style="color: #D27428;">public </span><span style="color: #D27428;">class </span>JavaToken {
    <span style="color: #D27428;">private </span><span style="color: #D27428;">final </span>JavaTokenEnum e;
    <span style="color: #D27428;">private </span><span style="color: #D27428;">final </span>String value;
    <span style="color: #D27428;">private </span><span style="color: #D27428;">final </span><span style="color: #D27428;">int</span> endsAt;
    <span style="color: #D27428;">private </span><span style="color: #D27428;">static </span><span style="color: #D27428;">final </span>Map&lt;String, JavaTokenEnum&gt; token;
    <span style="color: #D27428;">static </span><a class="foldable-block"><span style="color: #00b800;">{</span>
        token = <span style="color: #D27428;">new </span><span style="font-weight: bold; color: #e8e4d6">HashMap</span>&lt;&gt;();
        <span style="color: #D27428;">for </span>(JavaTokenEnum r: JavaTokenEnum.values()) <a class="foldable-block"><span style="color: #00b800;">{</span>
            <span style="color: #D27428;">if </span>(r != JavaTokenEnum.STRING && r != JavaTokenEnum.TOKEN) <a class="foldable-block"><span style="color: #00b800;">{</span>
                token.put(r.value, r);
            <span style="color: #00b800;">}</span></a> 
        <span style="color: #00b800;">}</span></a>
    <span style="color: #00b800;">}</span></a>
    
    <span style="color: #D27428;">public </span>JavaToken(JavaTokenEnum e, String value, <span style="color: #D27428;">int</span> endsAt) <a class="foldable-block"><span style="color: #00b800;">{</span>
        <span style="color: #D27428;">this</span>.e = e;
        <span style="color: #D27428;">this</span>.value = value;
        <span style="color: #D27428;">this</span>.endsAt = endsAt;
    <span style="color: #00b800;">}</span></a>
    <span style="color: #D27428;">static </span>&lt;T&gt; JavaToken newToken(T t, <span style="color: #D27428;">int</span> endsAt) <a class="foldable-block"><span style="color: #00b800;">{</span>
        String str = t.toString();
        <span style="color: #D27428;">if </span>(token.containsKey(str)) <a class="foldable-block"><span style="color: #00b800;">{</span>
            JavaTokenEnum e = token.get(str);
            <span style="color: #D27428;">return </span><span style="color: #D27428;">new </span><span style="font-weight: bold; color: #e8e4d6">JavaToken</span>(e, e.value, endsAt);
        <span style="color: #00b800;">}</span></a> 
        <span style="color: #D27428;">if </span>(str.matches(<span style="color: #477944;">"^[-+]?\\d+(\\.\\d+)?$"</span>)) <a class="foldable-block"><span style="color: #00b800;">{</span>
            <span style="color: #D27428;">return </span><span style="color: #D27428;">new </span><span style="font-weight: bold; color: #e8e4d6">JavaToken</span>(JavaTokenEnum.NUMBER, str, endsAt);
        <span style="color: #00b800;">}</span></a> 
        <span style="color: #D27428;">return </span><span style="color: #D27428;">new </span><span style="font-weight: bold; color: #e8e4d6">JavaToken</span>(JavaTokenEnum.TOKEN, str, endsAt);
    <span style="color: #00b800;">}</span></a>
    <span style="color: #D27428;">public </span>JavaTokenEnum getE() <a class="foldable-block"><span style="color: #00b800;">{</span>
        <span style="color: #D27428;">return </span><span style="color: #D27428;">this</span>.e;
    <span style="color: #00b800;">}</span></a>
    <span style="color: #D27428;">public </span>String getValue() <a class="foldable-block"><span style="color: #00b800;">{</span>
        <span style="color: #D27428;">return </span><span style="color: #D27428;">this</span>.value;
    <span style="color: #00b800;">}</span></a>
    <span style="color: #D27428;">public </span><span style="color: #D27428;">int</span> getEndsAt() <a class="foldable-block"><span style="color: #00b800;">{</span>
        <span style="color: #D27428;">return </span><span style="color: #D27428;">this</span>.endsAt;
    <span style="color: #00b800;">}</span></a>
}
</body></html></pre>